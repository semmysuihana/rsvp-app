generator client {
  provider = "prisma-client-js"
  output   = "../src/app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  MALE
  FEMALE
}

enum SubscriptionPlan {
  FREE
  BASIC
  PRO
}

model User {
  id               String           @id @default(uuid())
  name             String
  idCardNumber     String           @unique
  birthDate        DateTime
  gender           Gender
  phone            String           @unique
  email            String           @unique
  username         String           @unique
  passwordHash     String
  subscriptionPlan SubscriptionPlan @default(FREE)
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt

  // Relation
  events Event[]
}

model Event {
  id           String   @id @default(uuid())
  userId       String
  name         String
  date         DateTime
  time         DateTime
  venueName    String
  address      String
  rtRw         String
  district     String
  subDistrict  String
  city         String
  googleMapUrl String
  maxPax       Int
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  // Relation FK
  user User @relation(fields: [userId], references: [id], onDelete: Restrict)
}
